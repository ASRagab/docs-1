The Documents service provides applications with the ability to store and retrieve application state.
Nitric strives to make this process as easy as possible, using a documents API. Application code can specify
the name of the collection and use a set of powerful methods to query and manage the documents.

Nitric will automatically provision any required infrastructure with your cloud provider.

## Key concepts

### Documents

Documents are the unit of storage within a collection. They are a lightweight record that contains fields, which map to values. Each document is identified by a unique id.

A document representing an actor `downeyjr` might look like this:

```json
üìÑ downeyjr
{
  "first": "Robert",
  "last": "Downey Jr",
  "born": 1965
}
```

TODO talk about data types and nested documents briefly

### Collections

Collections are simply containers for documents. In SQL database terms a collections equate to tables.

For example, you could have an actors collection to contain various actors, each represented by a document:

```json
üóÇÔ∏è actors
    üìÑ downeyjr
    {
     "first": "Robert",
     "last": "Downey Jr",
     "born": 1965
    }
    üìÑ johansson
    {
     "first": "Scarlett",
     "last": "Johansson",
     "born": 1984
    }
```

The ids of documents within a collection are unique. You also do not need to create or delete collections as this is automatically handled when a document is created or all documents in a collection are deleted.

### References

References are a uniquely identifiable location within a database. A reference can be created regardless of whether data exists and does not perform any network calls. You can create document and collection references.

<CodeExamples 
	languages={[
	{
		label: "Node.js",
		value: "node"
	},
	{
		label: "Python",
		value: "python"
	},
	{
		label: "Java",
		value: "java"
	},
	{
		label: "Go",
		value: "go"
	},
	{
		label: "PHP",
		value: "php"
	},
	{
		label: "C#",
		value: "c-sharp"
	}
	]}
	defaultLang="node"
>
<CodeExample lang="node">

```typescript
// create a reference to a collection named 'products'
const collection = documents().collection('products');

// create a reference to a document named 'nitric'
const nitric = collection.doc('nitric');
```

</CodeExample>
<CodeExample lang="python">

```python
# create a reference to a collection named 'products'
products = documents.collection("products")

# create a reference to a document named 'nitric'
nitric = products.doc("nitric")
```

</CodeExample>

<CodeExample lang="java">

```java
TODO
```

</CodeExample>

<CodeExample lang="go">

```go
TODO
```

</CodeExample>

<CodeExample lang="php">

```php
// Todo
```

</CodeExample>

<CodeExample lang="c-sharp">

```csharp
TODO
```

</CodeExample>

</CodeExamples>

## Usage

Using one of the provided Nitric SDKs for your language is the easiest way to work with collections.

## Add and manage data

To add a new document to a collection, use the `set()` method with an explicitly specifying a document identifier:

### Add a document

<CodeExamples 
	languages={[
	{
		label: "Node.js",
		value: "node"
	},
	{
		label: "Python",
		value: "python"
	},
	{
		label: "Java",
		value: "java"
	},
	{
		label: "Go",
		value: "go"
	},
	{
		label: "PHP",
		value: "php"
	},
	{
		label: "C#",
		value: "c-sharp"
	}
	]}
	defaultLang="node"
>
<CodeExample lang="node">

```typescript
import { documents } from '@nitric/sdk';

interface Product {
  id: string;
  name: string;
  description: string;
}

const collection = documents().collection<Product>('products');

await collection.doc('nitric').set({
  id: 'nitric',
  name: 'nitric',
  description: 'A development framework!',
});
```

</CodeExample>
<CodeExample lang="python">

```python
from nitric.api import Documents

# construct a documents client with default options
documents = Documents()

# create a reference to a collection named 'products'
products = documents.collection("products")

# create/update a document with the id 'nitric', in the products collection
await products.doc("nitric").set({
    "id": "nitric",
    "name": "Nitric Framework",
    "description": "A development framework",
})
```

</CodeExample>

<CodeExample lang="java">

```java
import io.nitric.api.kv.KeyValueClient;
...

var client = KeyValueClient.newBuilder(Product.class)
	.collection("products")
	.build();

var product = new Product();

client.put("nitric", product);
```

</CodeExample>

<CodeExample lang="go">

```go
import (
    "github.com/nitrictech/go-sdk/api"
    "github.com/nitrictech/go-sdk/kvclient"
)
...

kvClient := client.KV()

product := map[string]interface{}{
	"id":          "nitric",
	"name":        "nitric",
	"description": "A development framework!",
}

kvClient.PutKey("products", "nitric", product)

if err != nil {
	// Handle error
}
```

</CodeExample>

<CodeExample lang="php">

```php
// Todo
```

</CodeExample>

<CodeExample lang="c-sharp">

```csharp
using Nitric.Api.KeyValue;
...

var client = new KeyValueClient<Product>.NewBuilder()
	.Collection("products")
	.Build();

var product = new Product();

client.Put("nitric", product);
```

</CodeExample>

</CodeExamples>

### Update a document

> This functionality is coming soon ‚ö†Ô∏è

### Delete data

To delete a value use `KeyValueClient` to `delete` a value from a collection:

<CodeExamples 
	languages={[
	{
		label: "Node.js",
		value: "node"
	},
	{
		label: "Python",
		value: "python"
	},
	{
		label: "Java",
		value: "java"
	},
	{
		label: "Go",
		value: "go"
	},
	{
		label: "PHP",
		value: "php"
	},
	{
		label: "C#",
		value: "c-sharp"
	}
	]}
	defaultLang="node"
>
<CodeExample lang="node">

```typescript
import { KeyValueClient } from '@nitric/sdk';

const client = new KeyValueClient<any>('products');

await client.delete('nitric');
```

</CodeExample>
<CodeExample lang="python">

```python
from nitric.api import Documents

documents = Documents()

await documents.collection("products").doc("nitric").delete()
```

</CodeExample>

<CodeExample lang="java">

```java
import io.nitric.api.kv.KeyValueClient;
...

var client = KeyValueClient.newBuilder(Product.class)
	.collection("products")
	.build();

client.delete("nitric");
```

</CodeExample>

<CodeExample lang="go">

```go
import (
    "github.com/nitrictech/go-sdk/api"
    "github.com/nitrictech/go-sdk/kvclient"
)

kvclient := client.KV()

err := kvclient.Delete("nitric")

if err != nil {
	// Handle error
}
```

</CodeExample>

<CodeExample lang="php">

```php
use Nitric\Api\KeyValueClient;

$client = new KeyValueClient();

$client->delete("nitric");
```

</CodeExample>

<CodeExample lang="c-sharp">

```csharp
using Nitric.Api.KeyValue;
...

var client =  new KeyValueClient<Product>.NewBuilder()
	.Collection("products")
	.Build();

client.Delete("nitric");
```

</CodeExample>

</CodeExamples>

## Read data

There are three ways to retrieve data, any of these methods can be used with documents, collections of documents, or the results of queries:

- Call the `get()` method to retrieve a single document.

- Call the `fetch()` or `stream()` methods to retrieve multiple documents.

### Get data once

<CodeExamples 
	languages={[
	{
		label: "Node.js",
		value: "node"
	},
	{
		label: "Python",
		value: "python"
	},
	{
		label: "Java",
		value: "java"
	},
	{
		label: "Go",
		value: "go"
	},
	{
		label: "PHP",
		value: "php"
	},
	{
		label: "C#",
		value: "c-sharp"
	}
	]}
	defaultLang="node"
>
<CodeExample lang="node">

```typescript
import { KeyValueClient } from '@nitric/sdk';

interface Product {
  id: string;
  name: string;
  description: string;
}

const client = new KeyValueClient<Product>('products');

const product = await client.get('nitric');
```

</CodeExample>
<CodeExample lang="python">

```python
from nitric.api import Documents

documents = Documents()

product = await documents.collection("products").doc("nitric").get()

product.content["name"] = "new nitric"
```

</CodeExample>

<CodeExample lang="java">

```java
import io.nitric.api.kv.KeyValueClient;
...

var client = KeyValueClient.newBuilder(Product.class)
	.collection("products")
	.build();

var product = client.get("nitric");
```

</CodeExample>

<CodeExample lang="go">

```go
import (
    "github.com/nitrictech/go-sdk/api"
    "github.com/nitrictech/go-sdk/kvclient"
)

kvClient := client.KV()

product, err := kvclient.get("products", "nitric")

if err != nil {
	// Handle error
}
```

</CodeExample>

<CodeExample lang="php">

```php
use Nitric\Api\KeyValueClient;

$client = new KeyValueClient();

$product = $client->get("products", "nitric");
```

</CodeExample>

<CodeExample lang="c-sharp">

```csharp
using Nitric.Api.KeyValue;
...

var client =  new KeyValueClient<Product>.NewBuilder()
	.Collection("products")
	.Build();

var product = client.Get("nitric")
```

</CodeExample>

</CodeExamples>

### Simple and compound queries

### Limit data

### Paginate data

### Stream data
