## Introduction

React is a JavaScript library that allows for building fast and complex web apps or websites.

Using the Nitric framework we can build a simple react application more efficiently and can then distribute it to any cloud.
For this tutorial you will require Node. To check if you have Node installed, run this command in your terminal:

```bash
node -v
```

If Node is installed, it should produce a version number like `v14.16.0`.

It is also assumed that you have already installed the Nitric CLI. If not visit the [installation instructions](../installation.mdx).

## Project set up

For this project we will make a simple react app which greets a user based on a name provided.

Using the Nitric CLI we start by creating the project.

```bash
nitric make:project nitric-greeter
```

Next we'll be asked if we want an initial service in the project and what template the service will use. For this project we will want a service. This service will handle requests for greeting and respond to the greetings. For this we will use the `nodets12` template.

```bash
? Include an example service? (Use arrow keys)
❯ function/nodets12
  function/nodejs12
  function/python37
  function/java11
  function/golang15
  function/php8
  server/nextjs-typescript
```

Next, we'll be asked for a name for the service. We will name it `greeter`.

```bash
? Name for the example service? greeter
✔ Making Project nitric-greeter
✔ Making Service greeter
```

The project structure should now look like this:

```bash
nitric-greeter
|-- .nitric
|   |-- templates
|       |-- function
|           |-- nodets12
|               |-- template
|                   |-- .gitignore
|                   |-- index.ts
|                   |-- package.json
|                   |-- tsconfig.json
|               |-- .gitignore
|               |-- Dockerfile
|               |-- Dockerfile.dockerignore
|               |-- README.md
|-- greeter
|   |-- .gitignore
|   |-- index.ts
|   |-- package.json
|   |-- tsconfig.json
|-- nitric.yaml
```

## Building the service

Let's start building the service that can return a greeting with a name.

### Initialize service

Before we start building we need to install our dependencies. Firsly go into the `nitric-greeter/greeter` service directory:

```bash
cd nitric-greeter/greeter
```

Then install the dependencies:

```bash
yarn install
# OR
npm install
```

Now that we have the dependencies installed, it is time to start coding.

Open up the `greeter/index.ts` file. This is where we build the code for our greeter service.

```typescript
// import the Nitric FaaS library
import { faas } from "@nitric/sdk";

interface HelloWorldRequest {
  name: string;
  greeting: string;
}

interface HelloWorldResponse {
  response: string;
}

async function handler(
  request: faas.NitricTrigger<HelloWorldRequest>
): Promise<HelloWorldResponse> {
  const { name, greeting = "Hello" } = request.dataAsObject();

  return { response: `${greeting} ${name}!` };
}

faas.start(handler);
```

Using this handler function we can now provide it a `HelloWorldRequest` and recieve a `HelloWorldResponse`. The `faas.start` hosts your function so that it can take requests. We can access this using a HTTP Request, such as cURL or Postman.

### Run the service

First we will start our service using this command:

```bash
nitric run
```

Once built and running you should see the following output:

```bash
✔ Building Services
✔ Creating docker network
✔ Creating Volume: nitric-greeter-vol
✔ Running Services
✔ Starting API Gateways
✔ Starting Entrypoints
Service    Port
greeter    49152
Running, press 'Q' to clean up and exit...
```

Run the cURL command substituing the port 49152 with the outputted port from the `nitric run` command:

```bash
curl -H "Content-Type: application/json" -d '{"name":"Nitric"}' http://localhost:49152/
```

This will give us a response JSON:

```bash
{"response":"Hello Nitric!"}
```

We now know our service is working the way we want and can move on to building the react app.

## Building the App

We will now look at creating a React app which will utilize our new `greeter` service.

### Initialize a React app

We can use <a href="https://create-react-app.dev/docs/getting-started/" target="_blank">Create React App</a> to initialize a TypesScript app.

In the `nitric-greeter` project directory run:

```bash
npx create-react-app greeter-ui --template typescript
cd greeter-ui
```

After that has finished running, our root folder structure should have a new folder with the `greeter-ui` folder. We will remove most of the files created by the command and write our own.

```bash
greeter-ui
|-- node_modules
|-- public
|   |-- index.html
|   |-- manifest.json
|-- src
|   |-- App.tsx
|   |-- index.tsx
|-- .gitignore
|-- package.json
|-- README.md
|-- tsconfig.json
|-- yarn.lock
```

### Set up a greeting form

After a user has visited our app we can allow them to enter a name and greeting to send to our service.

Let's create this form within `src/App.tsx` For this we will start by setting up some basic input and a button to get the greeting.

```tsx
import React, { SyntheticEvent, useState } from "react";

const App = () => {
  const [name, setName] = useState("Nitric");
  const [greeting, setGreeting] = useState("Hello");
  const [response, setResponse] = useState("");

  return (
    <div>
      <form>
        <label>
          Name:
          <input
            type="text"
            value={name}
            onChange={(e) => setName(e.target.value)}
          />
        </label>
        <br />
        <label>
          Greeting:
          <input
            type="text"
            value={greeting}
            onChange={(e) => setGreeting(e.target.value)}
          />
        </label>
        <br />
        <button type="submit">Greetings World!</button>
      </form>
    </div>
  );
};

export default App;
```

### Launch!

To launch our new greeting app, we require a couple of steps:

First, we need to add the site to our `nitric.yaml` file under `sites`:

```yaml
name: nitric-greeter
services:
  greeter:
    path: greeter
    runtime: function/nodets12

sites:
  greeter-ui:
    path: greeter-ui
    assetPath: ./build
    buildScripts:
      - yarn build
```

> Note: `yarn` can be replaced with `npm` if that is your preferred package manager.

We can then define entrypoints to our app:

```yaml
name: nitric-greeter
services:
  greeter:
    path: greeter
    runtime: function/nodets12

sites:
  greeter-ui:
    path: greeter-ui
    assetPath: ./build
    buildScripts:
      - yarn build

entrypoints:
  main:
    paths:
      /:
        type: site
        target: greeter-ui
      /greeter/:
        type: service
        target: greeter
```

This tells the Nitric CLI how to build the paths and where they point. Our first path will be the site, which will be at the root. The next path is the `/greeter/` path, which is where the greeter service is hosted. This greeter service will sit relative to the site and so we can use our function that way.

This can be done using a fetch statement in a new function that is called by our form. The fetch statement will make a HTTP request to our service and we will receive back our response.

Back in our `src/App.tsx` component let's make some changes to make this happen:

```tsx
import React, { SyntheticEvent, useState } from "react";

const App = () => {
  const [name, setName] = useState("Nitric");
  const [greeting, setGreeting] = useState("Hello");
  const [response, setResponse] = useState("");

  async function getResponse(event: SyntheticEvent) {
    event.preventDefault();

    const rawResponse = await fetch("/greeter/", {
      method: "POST",
      body: JSON.stringify({
        name: name,
        greeting: greeting,
      }),
    });
    const content = await rawResponse.json();
    setResponse(content.response);
  }

  return (
    <div>
      <form onSubmit={getResponse}>
        <label>
          Name:
          <input
            type="text"
            value={name}
            onChange={(e) => setName(e.target.value)}
          />
        </label>
        <br />
        <label>
          Greeting:
          <input
            type="text"
            value={greeting}
            onChange={(e) => setGreeting(e.target.value)}
          />
        </label>
        <br />
        <button type="submit">Greetings World!</button>
      </form>
      <h1>{response}</h1>
    </div>
  );
};

export default App;
```

If we now use our `nitric run` command we should get a URL at the bottom. If we go to this URL in our browser it will open up into our app.

<img
  height="600"
  src="../../assets/img/react-app.png"
  alt="Greeter React App"
/>
