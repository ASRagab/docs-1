## Introduction

<a href="https://v3.vuejs.org/" target="_blank">
  Vue
</a> is a progressive JavaScript framework that allows for building fast and complex
web apps or websites.

Using the Nitric framework we can build a simple Vue application more efficiently and can then distribute it to any cloud.
For this tutorial you will require <a href="https://nodejs.org/" target="_blank">Node.</a> To check if you have Node installed, run this command in your terminal:

```bash
node -v
```

If Node is installed, it should produce a version number like `v14.16.0`.

It is also assumed that you have already installed the Nitric CLI. If not visit the [installation instructions](../installation.mdx).

## Project set up

For this project we will make a simple Vue app which greets a user based on a name provided.

Using the Nitric CLI we start by creating the project.

```bash
nitric make:project nitric-greeter
```

Next we'll be asked if we want an initial service in the project and what template the service will use. For this project we will want a service. This service will handle requests for greeting and respond to the greetings. For this we will use the `nodets12` template.

```bash
? Include an example service?
‚ùØ function/nodets12
  function/nodejs12
  function/python37
  function/java11
  function/golang15
  function/php8
  server/nextjs-typescript
(Move up and down to reveal more choices)
```

Next, we'll be asked for a name for the service. We will name it `greeter`.

```bash
? Name for the example service? greeter
‚úî Making Project nitric-greeter
‚úî Making Service greeter
```

Under the `nitric-greeter` directory you will see the `.nitric` folder which contains your local nitric files and a `greeter` folder containing the service.

## Building the service

Let's start building the service that can return a greeting with a name.

### Initialize service

Before we start building we need to install our dependencies. Firstly go into the `nitric-greeter/greeter` service directory:

```bash
cd nitric-greeter/greeter
```

Then install the dependencies:

```bash
yarn install
# OR
npm install
```

Now that we have the dependencies installed, it is time to start coding.

Open up the `greeter/index.ts` file. This is where we build the code for our greeter service.

```typescript
// import the Nitric FaaS library
import { faas } from '@nitric/sdk';

interface HelloWorldRequest {
  name: string;
  greeting: string;
}

interface HelloWorldResponse {
  response: string;
}

async function handler(
  request: faas.NitricTrigger<HelloWorldRequest>
): Promise<HelloWorldResponse> {
  const { name, greeting = 'Hello' } = request.dataAsObject();

  return { response: `${greeting} ${name}!` };
}

faas.start(handler);
```

Using this handler function we can now provide it a `HelloWorldRequest` and receive a `HelloWorldResponse`. The `faas.start` hosts your function so that it can take requests. We can access this using a HTTP Request, such as cURL or Postman.

### Run the service

First we will start our service using this command:

```bash
nitric run
```

Once built and running you should see the following output:

```bash
‚úî Building Services
‚úî Creating docker network
‚úî Creating Volume: nitric-greeter-vol
‚úî Running Services
‚úî Starting API Gateways
‚úî Starting Entrypoints
Service    Port
greeter    49152
Running, press 'Q' to clean up and exit...
```

Run the cURL command substituting the port 49152 with the outputted port from the `nitric run` command:

```bash
curl -H "Content-Type: application/json" -d "{\"name\":\"Nitric\"}" http://localhost:49152/
```

This will give us a response JSON:

```bash
{"response":"Hello Nitric!"}
```

We now know our service is working the way we want and can move on to building the Vue 3 app.

## Building the App

We will now look at creating a Vue app which will utilize our new `greeter` service.

### Initialize a Vue 3 app

We can use <a href="https://vitejs.dev/guide/#scaffolding-your-first-vite-project" target="_blank">Vite with Vue 3 Template</a> to initialize a TypesScript Vue 3 app.

In the `nitric-greeter` project directory run:

```bash
# npm 6.x
npm init @vitejs/app greeter-ui --template vue-ts

# npm 7+, extra double-dash is needed:
npm init @vitejs/app greeter-ui -- --template vue-ts

# yarn
yarn create @vitejs/app greeter-ui --template vue-ts

cd greeter-ui
```

After that has finished running, our root folder structure should have a new folder with the `greeter-ui` folder.

Install the dependencies of the project via:

```bash
yarn install
# OR
npm install
```

And one optional step is to add the CSS file `src/assets/main.css` to make our app look beautiful. You can find the full contents of this file <a href="https://raw.githubusercontent.com/nitrictech/docs/main/assets/tutorial-styles.css" target="_blank" rel="noopener noreferrer">here.</a>
Then simply import it in your `main.ts` file.

```ts
import { createApp } from 'vue';
import App from './App.vue';
import './assets/main.css';

createApp(App).mount('#app');
```

### Set up greeting component

When a user has visited our app we can provide a form for them to enter a name and greeting to send to our service.

Let's create this form within `src/App.vue`.

Start by setting up some basic inputs, a function to handle the service call and a button to initiate the call.

```html
<template>
  <div class="center">
    <div class="container grid">
      <h1>Nitric + Vue 3</h1>
      <div class="form-grid">
        <div class="field">
          <label htmlFor="name">Name</label>
          <input id="name" type="text" v-model="name" />
        </div>
        <div class="field">
          <label htmlFor="greeting">Greeting</label>
          <input id="greeting" type="text" v-model="greeting" />
        </div>
      </div>
      <button class="primary" @click="updateGreeting">
        {{ loading ? "Loading..." : "Send Greetings" }}
        <div class="loader" :class="{ loading: loading }">üöÄ</div>
      </button>
      <h2 class="greeting" v-if="response">
        {{ response }}
        <div class="wave">üëã</div>
      </h2>
    </div>
  </div>
</template>

<script lang="ts">
  import { ref } from 'vue';

  export default {
    setup() {
      const loading = ref(false);
      const name = ref('Nitric');
      const greeting = ref('Hello');
      const response = ref('');

      const updateGreeting = async () => {
        try {
          loading.value = true;
          const rawResponse = await fetch('/greeter/', {
            method: 'POST',
            body: JSON.stringify({
              name: name.value,
              greeting: greeting.value,
            }),
          });
          const content = await rawResponse.json();
          response.value = content.response;
        } catch (error) {
          alert(error.message);
        } finally {
          loading.value = false;
        }
      };

      return {
        loading,
        name,
        greeting,
        response,
        updateGreeting,
      };
    },
  };
</script>
```

Before we launch our new greeting app, we require a couple of steps:

First, we need to add the site to our `nitric.yaml` file under `sites`:

```yaml
name: nitric-greeter
services:
  greeter:
    path: greeter
    runtime: function/nodets12

sites:
  greeter-ui:
    path: greeter-ui
    assetPath: ./dist
    buildScripts:
      - yarn build
```

> Note: `yarn` can be replaced with `npm` if that is your preferred package manager.

We can then define entrypoints to our app:

```yaml
name: nitric-greeter
services:
  greeter:
    path: greeter
    runtime: function/nodets12

sites:
  greeter-ui:
    path: greeter-ui
    assetPath: ./dist
    buildScripts:
      - yarn build

entrypoints:
  main:
    paths:
      /:
        type: site
        target: greeter-ui
      /greeter/:
        type: service
        target: greeter
```

This tells the Nitric CLI how to build the paths and where they point. Our first path will be the site, which will be at the root. The next path is the `/greeter/` path, which is where the greeter service is hosted. This greeter service will sit relative to the site and so we can use our function that way.

### Launch!

Now that we have the component and logic in place, we can run our app:

```bash
nitric run
```

And then click and open the `main` entrypoint localhost url and you should see the completed app:

```bash
‚úî Starting Entrypoints
 Service Port
 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
 greeter 49152
 Entrypoint Url
 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
 main       http://localhost:59770
```

<img
  height="600"
  src="../../assets/img/vue-tutorial.png"
  alt="Greeter Vue App"
/>
