The Documents service provides applications with the ability to store and retrieve application state.
Nitric strives to make this process as easy as possible, using a documents API. Application code can specify
the name of the collection and use a set of powerful methods to query and manage the documents.

Nitric will automatically provision any required infrastructure with your cloud provider.

## Key concepts

### Secrets

Secrets are containers that can have one or more versions, the secrets themselves are stored with each version where they can be rotated to safely update secrets in production environments.

### Secret Versions

Secret versions a are a version of the given secret and contain the secret itself

#### Subcollections

Subcollections allow you to structure data hierarchically, making data easier to access. This is perfect when you have data that expands over time.

The advantages of Subcollections are that the parent collection size doesn't change when your Subcollections grow and you also get full query capabilities.

### References

References are a uniquely identifiable entities within a secret store. A reference can be created regardless of whether the underlying secret exists and does not perform any network calls. You can create `secret` and `secret version` references.

<CodeExamples 
	languages={[
	{
		label: "Node.js",
		value: "node"
	},
	{
		label: "Python",
		value: "python"
	},
	{
		label: "Java",
		value: "java"
	},
	{
		label: "Go",
		value: "go"
	},
	{
		label: "PHP",
		value: "php"
	},
	{
		label: "C#",
		value: "c-sharp"
	}
	]}
	defaultLang="node"
>
<CodeExample lang="node">

```typescript
// create a reference to a secret named 'db-conn'
const dbSecret = secrets().secret('db-conn');

// create a reference to the 'latest' version of 'db-conn'
const dbConn = dbSecret.version('latest')
```

</CodeExample>
<CodeExample lang="python">

```python
# create a reference to a secret named 'db-conn'
db_secret = secrets.secret("db-conn")

# create a reference to the 'latest' version of 'db-conn'
db_conn = db_secret("latest")
```

</CodeExample>

<CodeExample lang="java">

```java
TODO
```

</CodeExample>

<CodeExample lang="go">

```go
import (
	"github.com/nitrictech/go-sdk/api/secrets"
)

...

secs, _ := secrets.New()

// create a reference to a secret named 'db-conn'
dbSec := secs.Secret("do-conn")

// create a reference to the 'latest' version of 'db-conn'
dbConn := dbSec.Version("latest")
```

</CodeExample>

<CodeExample lang="php">

```php
use Nitric\Api\Secrets;

$secs = new Secrets();

// create a reference to a secret named 'db-conn'
$dbConn = $secs->secret("db-conn")

// create a reference to the 'latest' version of 'db-conn'
$dbSec = $dbConn->version("latest");
```

</CodeExample>

<CodeExample lang="c-sharp">

```csharp
TODO
```

</CodeExample>

</CodeExamples>

## Usage

Using one of the provided Nitric SDKs for your language is the easiest way to work with collections.

## Creating new secret versions

To create a new secret version to a secret, use the `put()` method on a secret reference:

### Set a document

<CodeExamples 
	languages={[
	{
		label: "Node.js",
		value: "node"
	},
	{
		label: "Python",
		value: "python"
	},
	{
		label: "Java",
		value: "java"
	},
	{
		label: "Go",
		value: "go"
	},
	{
		label: "PHP",
		value: "php"
	},
	{
		label: "C#",
		value: "c-sharp"
	}
	]}
	defaultLang="node"
>
<CodeExample lang="node">

```typescript
import { secrets } from '@nitric/sdk';

// create a reference to a secret called 'new-secret'
const secret = secrets().secret('new-secret');

// Calling put will give you a reference to the newly created secret version
const version = await secret.put('shhhh.... it's a secret');
```

</CodeExample>
<CodeExample lang="python">

```python
from nitric.api import Secrets

# construct a documents client with default options
secrets = Secrets()

# create a reference to a secret called 'new-secret'
secret = secrets.secret("new-secret")

# Calling put will give you a reference to the newly created secret version
version = secret.put("shhhh.... it's a secret")
```

</CodeExample>
<CodeExample lang="java">

```java
TODO
```

</CodeExample>
<CodeExample lang="go">

```go
import (
	"github.com/nitrictech/go-sdk/api/secrets"
)

...

secs, _ := secrets.New()

// create a reference to a secret called 'new-secret'
secret := secs.Secret("new-secret")

// Calling put will give you a reference to the newly created secret version
version, err := secret.Put("shhhh.... it's a secret")

if err != nil {
	// handle error
}
```

</CodeExample>
<CodeExample lang="php">

```php
use Nitric\Api\Secrets;

$secs = new Secrets();

// create a reference to a secret called 'new-secret'
$secret = $secs->secret("new-secret")

// Calling put will give you a reference to the newly created secret version
$version = $secret->put("shhhh.... it's a secret");
```

</CodeExample>
<CodeExample lang="c-sharp">

```csharp
TODO
```

</CodeExample>
</CodeExamples>

### Accessing secrets

To access a secret from a version of a secret from a collection, use the `access()` method.

> You can always use version 'latest' to get the latest version of a secret

<CodeExamples 
	languages={[
	{
		label: "Node.js",
		value: "node"
	},
	{
		label: "Python",
		value: "python"
	},
	{
		label: "Java",
		value: "java"
	},
	{
		label: "Go",
		value: "go"
	},
	{
		label: "PHP",
		value: "php"
	},
	{
		label: "C#",
		value: "c-sharp"
	}
	]}
	defaultLang="node"
>
<CodeExample lang="node">

```typescript
import { secrets } from '@nitric/sdk';

secret = await secrets().secret('new-secret').version('latest').access();
```

</CodeExample>
<CodeExample lang="python">

```python
from nitric.api import Secrets

secrets = Secrets()

content = await secrets.secret("new-secret").version("latest").access()
```

</CodeExample>
<CodeExample lang="java">

```java
TODO
```

</CodeExample>
<CodeExample lang="go">

```go
import (
	"github.com/nitrictech/go-sdk/api/secrets"
)

...

secs, _ := secrets.New()

content, err := secs.Secret("new-secret").Version("latest").Access()

if err != nil {
	// handle error
}
```

</CodeExample>
<CodeExample lang="php">

```php
use Nitric\Api\Secrets;

$secs = new Secrets();

$content = $secs->secret("new-secret")->version("latest").access()
```

</CodeExample>
<CodeExample lang="c-sharp">

```csharp
TODO
```

</CodeExample>
</CodeExamples>
